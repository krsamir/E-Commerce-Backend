"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[544],{1544:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var r=n(5861),a=n(1413),s=n(7757),o=n.n(s),i=n(2791),u=n(3044),c=n(6151),l=n(4708),d=n(7391),h=n(3060),p=n(703),m=n(4554),f=n(1889),x=n(403),g=n(890),v=n(1979),Z=n(7012),w=n(885),j=n(5289),y=n(7123),T=n(9157),b=n(1691),k=n(5661),P=n(4569),S=n.n(P),C=n(1924),W=n(364),D=n(184);var E=(0,W.$j)(null,{successToast:C.Q,errorToast:C.J})((function(e){var t=(0,i.useState)(!1),n=(0,w.Z)(t,2),a=n[0],s=n[1],u=(0,i.useState)(!1),l=(0,w.Z)(u,2),h=l[0],p=l[1],m=(0,i.useState)(""),f=(0,w.Z)(m,2),x=f[0],g=f[1],v=(0,i.useState)(""),Z=(0,w.Z)(v,2),P=Z[0],C=Z[1],W=(0,i.useState)(""),E=(0,w.Z)(W,2),F=E[0],O=E[1],A=(0,i.useState)(""),I=(0,w.Z)(A,2),q=I[0],J=I[1],Q=(0,i.useState)(!0),V=(0,w.Z)(Q,2),Y=V[0],$=V[1],z=function(){s(!1)},G=function(){var t=(0,r.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S().post("/auth/reset",{email:P}).then((function(t){var n=t.data;0===n.status&&e.errorToast(n.message),1===n.status&&(p(!0),e.successToast(n.message))})).catch((function(t){console.log(t),e.errorToast("Some issue while Sending OTP.")}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),K=function(){var t=(0,r.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S().post("/auth/reset/final",{email:P,token:x,password:q}).then((function(t){var n=t.data;1===n.status&&(e.successToast(n.message),z()),0===n.status&&e.errorToast(n.data.message,3e3)})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,D.jsxs)("div",{children:[(0,D.jsx)(c.Z,{variant:"text",onClick:function(){C(""),g(""),p(!1),$(!0),J(""),O(""),s(!0)},children:"Forgot Password ?"}),(0,D.jsxs)(j.Z,{open:a,onClose:function(e,t){"backdropClick"!==t&&z()},disableEscapeKeyDown:!0,children:[(0,D.jsx)(k.Z,{children:h?"Enter OTP":"Forgot Password ?"}),(0,D.jsxs)(T.Z,{children:[(0,D.jsx)(b.Z,{children:h?"Please enter the OTP recieved in your email before it expires.":"Please provide your Email. An Otp will sent to the provided email-id."}),h?(0,D.jsxs)("div",{children:[(0,D.jsx)(d.Z,{fullWidth:!0,id:"otp",label:"Enter OTP",name:"otp",value:x,onChange:function(t){if(t.target.value.length<=6&&(g(t.target.value),O("")),6===t.target.value.length){var n={username:P,token:t.target.value};setTimeout((0,r.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S().post("/auth/reset/verify",n).then((function(t){$(!0),0===t.data.status&&(O(t.data.message),g(""),e.errorToast(t.data.message)),1===t.data.status&&(e.successToast("Token Verification Successfull."),$(!1))})).catch((function(t){$(!0),console.log(t),429===t.response.status?e.errorToast(t.response.data):e.errorToast("Some issue while OTP Verification!!")}));case 2:case"end":return t.stop()}}),t)}))),200)}},error:F.length>0,helperText:F,style:{marginTop:"20px"},inputProps:{maxLength:6}}),(0,D.jsx)(d.Z,{fullWidth:!0,id:"password",label:"Password",name:"password",value:q,helperText:"Password should be minimum 8 characters.",onChange:function(e){J(e.target.value)},style:{marginTop:"20px"},disabled:Y})]}):(0,D.jsx)(d.Z,{autoFocus:!0,margin:"dense",id:"name",label:"Email Address",type:"email",fullWidth:!0,variant:"standard",value:P,onChange:function(e){return C(e.target.value)}})]}),(0,D.jsxs)(y.Z,{children:[(0,D.jsx)(c.Z,{onClick:z,children:"Cancel"}),h?(0,D.jsx)(c.Z,{onClick:K,disabled:Y&&q.length<8,children:"Approve"}):(0,D.jsx)(c.Z,{onClick:G,children:"Send"})]})]})]})}));function F(e){return(0,D.jsxs)(g.Z,(0,a.Z)((0,a.Z)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",(0,D.jsx)(h.Z,{color:"inherit",href:"#",children:"Your Website"})," ",(new Date).getFullYear(),"."]}))}var O=(0,v.Z)();var A=(0,W.$j)(null,{successToast:C.Q,errorToast:C.J})((function(e){var t=function(){var t=(0,r.Z)(o().mark((function t(n){var r,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=new FormData(n.currentTarget),a={email:r.get("email"),password:r.get("password")},t.next=5,S().post("/auth/login",a).then((function(t){if(0===t.data.status&&e.errorToast(t.data.message),1===t.data.status){e.successToast(t.data.message);var n=t.data.token,r=t.data.rid;window.localStorage.setItem("sid",n),window.localStorage.setItem("rid",r),setTimeout((function(){e.history.push("/")}),1e3)}})).catch((function(t){console.log(t),e.errorToast("Some issue while logging you in!!")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,D.jsx)(Z.Z,{theme:O,children:(0,D.jsxs)(f.ZP,{container:!0,component:"main",sx:{height:"100vh"},children:[(0,D.jsx)(l.ZP,{}),(0,D.jsx)(f.ZP,{item:!0,xs:!1,sm:4,md:7,sx:{backgroundRepeat:"no-repeat",backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[50]:e.palette.grey[900]},backgroundSize:"cover",backgroundPosition:"center"}}),(0,D.jsx)(f.ZP,{item:!0,xs:12,sm:8,md:5,component:p.Z,elevation:6,square:!0,children:(0,D.jsxs)(m.Z,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,D.jsx)(u.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,D.jsx)(x.Z,{})}),(0,D.jsx)(g.Z,{component:"h1",variant:"h5",children:"Sign in"}),(0,D.jsxs)(m.Z,{component:"form",noValidate:!0,onSubmit:t,sx:{mt:1},children:[(0,D.jsx)(d.Z,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),(0,D.jsx)(d.Z,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),(0,D.jsx)(c.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),(0,D.jsxs)(f.ZP,{container:!0,children:[(0,D.jsx)(f.ZP,{item:!0,xs:!0,children:(0,D.jsx)(E,(0,a.Z)({},e))}),(0,D.jsx)(f.ZP,{item:!0,children:(0,D.jsx)(h.Z,{href:"/register",variant:"body2",children:"Don't have an account? Sign Up"})})]}),(0,D.jsx)(F,{sx:{mt:5}})]})]})})]})})}))},1924:function(e,t,n){n.d(t,{Q:function(){return i},J:function(){return u}});var r=n(5861),a=n(7757),s=n.n(a),o=n(4327),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e3;return function(){var n=(0,r.Z)(s().mark((function n(r){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:o.G,payload:{message:e,duration:t}});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e3;return function(){var n=(0,r.Z)(s().mark((function n(r){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:o.W,payload:{message:e,duration:t}});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=544.dfa1eb4c.chunk.js.map